# Set the Linux image for the build
image: Ubuntu

# Define environment variables
environment:
  R_LIBS_USER: /usr/local/lib/R/site-library

# The 'install' phase to set up the build environment
install:
  - sudo apt-get update
  - sudo apt-get install -y --no-install-recommends software-properties-common dirmngr
  - sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys E298A3A825C0D65DFD57CBB651716619E084DAB9
  - bash -c "sudo add-apt-repository 'deb https://cloud.r-project.org/bin/linux/ubuntu $(lsb_release -cs)-cran40/'"
  - sudo apt-get update
  - sudo apt-get install -y --no-install-recommends r-base-dev
  - R --version

# The 'test_script' phase to run your tests
test_script:
  - Rscript -e "print(paste0('R version: ', R.version.string))"
  - Rscript -e "install.packages('ggplot2', repos='https://cloud.r-project.org')"
  - Rscript -e "library(ggplot2); print('ggplot2 installed successfully.')"

# Disable default build step (used for .NET projects)
build: off
